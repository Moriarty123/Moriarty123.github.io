---
slug: ES11
title: ES11
---

# ES11

## 空值合并运算符

??:左边的值为 null 或 undefined 时取右边的值

与||的区别是|| 左边是 0，false 等也会取右边的值

```javascript
console.log(undefined ?? "foo"); // foo
console.log(null ?? "foo"); // foo
console.log("foo" ?? "bar"); // foo

console.log(0 || 1); // 1
console.log(0 ?? 1); // 0
```

## globalThis

globalThis 用于访问全局作用域中的 this,提供了在 javascript 执行环境中都能稳定访问全局对象的标准方法，在 node.js 中是 global,在浏览器环境中是 window，在 web worker 中是 self

![image-20240824182752538](/Users/yitiantu/Library/Application Support/typora-user-images/image-20240824182752538.png)

## BigInt

BigInt 是内置对象，用于创建比 2^53 - 1 大的数字

BigInt 的特点：

不能运用 Math 的方法

不能与 Number 直接运算

带小数的运算会自动向下取整

与 Number 宽松相等

## Promise.allSettled

Promise.allSettled 接受一个 Promise 数组，等待数组所有 Promise 执行完成后返回，使用 then 接收 Promise 的结果

与 Promise.all 的区别：all 方法只要一个 Promise 错误直接 catch，allSettled 允许 Promise reject

```javascript
Promise.allSettled([
  Promise.resolve(111),
  Promise.reject(new Error("error")),
]).then((value) => {
  console.log(value);
});

Promise.all([
  Promise.resolve(111),
  Promise.resolve(111),
  Promise.reject(new Error("error")),
])
  .then((value) => {
    console.log(value);
  })
  .catch((error) => {
    console.log(error);
  });
```

## 按需引入

可以在需要的时候才引入

```javascript
console.log(() => {
  import("./allsettle.js");
});
```
